<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MotionLife Player Monitor</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        animation: {
          'float': 'float 6s ease-in-out infinite',
          'glow': 'glow 2s ease-in-out infinite alternate',
          'fadeIn': 'fadeIn 0.6s ease-in-out forwards',
          'slideIn': 'slideIn 0.5s ease-out forwards',
          'pulse-strong': 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
        },
        keyframes: {
          float: {
            '0%, 100%': { transform: 'translateY(0)' },
            '50%': { transform: 'translateY(-10px)' },
          },
          glow: {
            '0%': { boxShadow: '0 0 5px #10B981, 0 0 10px #10B981' },
            '100%': { boxShadow: '0 0 15px #10B981, 0 0 30px #10B981' },
          },
          fadeIn: {
            '0%': { opacity: '0' },
            '100%': { opacity: '1' },
          },
          slideIn: {
            '0%': { transform: 'translateY(20px)', opacity: '0' },
            '100%': { transform: 'translateY(0)', opacity: '1' },
          }
        }
      }
    }
  }
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<style>
  /* Base styles */
  body {
    margin: 0;
    overflow-x: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  
  /* Custom scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: #374151;
    border-radius: 4px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #10B981;
    border-radius: 4px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #059669;
  }
  
  .ping-indicator {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
    margin-right: 8px;
  }
  .ping-excellent { background-color: #10B981; }
  .ping-good { background-color: #22C55E; }
  .ping-medium { background-color: #F59E0B; }
  .ping-poor { background-color: #EF4444; }
  
  .maintenance-banner {
    background: linear-gradient(90deg, #F59E0B, #EF4444);
    animation: pulse 2s infinite;
  }
  
  .server-card {
    background: linear-gradient(180deg, #1F2937 0%, #111827 100%);
    border: 1px solid #374151;
    transition: all 0.3s ease;
  }
  .server-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
  }
  
  /* New enhanced styles */
  .glass-effect {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .neon-glow {
    box-shadow: 0 0 5px #10B981, 0 0 10px #10B981, 0 0 15px #10B981;
  }
  
  .tilt-effect {
    transform-style: preserve-3d;
    transition: transform 0.1s;
  }
  
  .skeleton-loading {
    background: linear-gradient(90deg, #1F2937 25%, #2D3748 50%, #1F2937 75%);
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
  }
  
  @keyframes loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
  
  .gradient-bg {
    background: linear-gradient(-45deg, #0f172a, #111827, #1e293b, #1f2937);
    background-size: 400% 400%;
    animation: gradient 15s ease infinite;
  }
  
  @keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  .typewriter {
    overflow: hidden;
    border-right: .15em solid #10B981;
    white-space: nowrap;
    animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
  }
  
  @keyframes typing {
    from { width: 0 }
    to { width: 100% }
  }
  
  @keyframes blink-caret {
    from, to { border-color: transparent }
    50% { border-color: #10B981; }
  }
  
  #particles-js {
    position: fixed;
    width: 100%;
    height: 100%;
    z-index: -1;
  }
  
  .toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 15px 25px;
    background: #1F2937;
    color: white;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    transform: translateY(100px);
    opacity: 0;
    transition: all 0.3s ease;
    z-index: 1000;
  }
  
  .toast.show {
    transform: translateY(0);
    opacity: 1;
  }
  
  .holographic-effect {
    background: linear-gradient(125deg, rgba(16, 185, 129, 0.1), rgba(59, 130, 246, 0.1), rgba(16, 185, 129, 0.1));
    background-size: 200% 200%;
    animation: holographic 3s ease infinite;
    position: relative;
    overflow: hidden;
  }
  
  @keyframes holographic {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  .holographic-effect::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(to bottom right, rgba(255,255,255,0.1), rgba(255,255,255,0));
    transform: rotate(30deg);
    pointer-events: none;
  }
  
  .cyber-border {
    position: relative;
    border: 1px solid transparent;
    background-clip: padding-box;
  }
  
  .cyber-border::before {
    content: '';
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
    z-index: -1;
    margin: -2px;
    border-radius: inherit;
    background: linear-gradient(45deg, #10B981, #3B82F6, #10B981);
    animation: border-flow 3s linear infinite;
    background-size: 200% 200%;
  }
  
  @keyframes border-flow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  .pixel-corners {
    position: relative;
    overflow: hidden;
  }
  
  .pixel-corners::before,
  .pixel-corners::after {
    content: '';
    position: absolute;
    width: 10px;
    height: 10px;
    background: #10B981;
    z-index: 2;
  }
  
  .pixel-corners::before {
    top: 0;
    left: 0;
    box-shadow: 0 0 5px #10B981;
  }
  
  .pixel-corners::after {
    bottom: 0;
    right: 0;
    box-shadow: 0 0 5px #10B981;
  }
  
  .scanline {
    position: relative;
    overflow: hidden;
  }
  
  .scanline::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 20px;
    background: linear-gradient(to bottom, rgba(16, 185, 129, 0.3), transparent);
    animation: scan 2s linear infinite;
    pointer-events: none;
  }
  
  @keyframes scan {
    0% { top: -20px; }
    100% { top: 100%; }
  }
  
  .matrix-rain {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
    opacity: 0.1;
  }
  
  .glitch-effect {
    position: relative;
  }
  
  .glitch-effect::before,
  .glitch-effect::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.8;
  }
  
  .glitch-effect::before {
    animation: glitch-animation 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
    color: #10B981;
    clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
    transform: translate(-2px, -2px);
  }
  
  .glitch-effect::after {
    animation: glitch-animation 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) reverse infinite;
    color: #3B82F6;
    clip-path: polygon(0 60%, 100% 60%, 100% 100%, 0 100%);
    transform: translate(2px, 2px);
  }
  
  @keyframes glitch-animation {
    0% { transform: translate(0); }
    20% { transform: translate(-2px, 2px); }
    40% { transform: translate(-2px, -2px); }
    60% { transform: translate(2px, 2px); }
    80% { transform: translate(2px, -2px); }
    100% { transform: translate(0); }
  }
  
  .terminal-text {
    font-family: 'Courier New', monospace;
    color: #10B981;
    text-shadow: 0 0 5px #10B981;
  }
  
  .cyber-button {
    background: linear-gradient(45deg, #10B981, #3B82F6);
    border: none;
    color: white;
    padding: 10px 20px;
    border-radius: 4px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
    transition: all 0.3s;
  }
  
  .cyber-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
  }
  
  .cyber-button::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(to bottom right, rgba(255,255,255,0.2), transparent);
    transform: rotate(45deg);
    transition: all 0.3s;
  }
  
  .cyber-button:hover::before {
    transform: rotate(45deg) translate(50px, 50px);
  }
  
  @media (max-width: 768px) {
    .container {
      padding: 10px;
    }
    
    .server-card {
      padding: 15px;
    }
    
    .player-grid {
      grid-template-columns: 1fr 3fr 1fr;
    }
  }
</style>
</head>
<body class="gradient-bg text-white min-h-screen flex flex-col items-center justify-start p-4 relative overflow-hidden">

<!-- Animated Background -->
<div id="particles-js"></div>
<canvas id="matrixRain" class="matrix-rain"></canvas>

<!-- Loading Screen -->
<div id="loading-screen" class="fixed inset-0 bg-gray-900 flex items-center justify-center z-50">
  <div class="text-center">
    <div class="animate-float">
      <svg class="animate-spin h-16 w-16 text-green-400 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      </svg>
    </div>
    <p class="mt-4 text-green-400 text-xl font-bold typewriter">Initializing Server Connection...</p>
  </div>
</div>

<!-- Toast Notification -->
<div id="toast" class="toast glass-effect">
  <i class="fas fa-sync-alt mr-2"></i> Data diperbarui
</div>

<!-- Main Content -->
<div class="container w-full max-w-4xl mx-auto mt-8 relative z-10 mb-12">
  <!-- Maintenance Banner -->
  <div id="maintenance-banner" class="maintenance-banner hidden w-full p-4 rounded-lg mb-6 text-center font-bold animate-slideIn holographic-effect">
    <i class="fas fa-tools mr-2"></i> Server sedang dalam maintenance (18.00 WIB - selesai)
  </div>

  <div class="text-center mb-8" data-aos="fade-down">
    <h1 class="text-4xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-blue-400 inline-block px-4 py-2 rounded-xl glitch-effect" data-text="MotionLife Server Monitor">
      MotionLife Server Monitor
    </h1>
    <p class="text-gray-300 mt-3 terminal-text" data-aos="fade-up">Real-time player monitoring system</p>
  </div>

  <!-- Server Status Card -->
  <div class="server-card p-6 rounded-xl mb-6 glass-effect cyber-border scanline" data-aos="zoom-in">
    <div class="flex flex-wrap justify-between items-center">
      <div class="flex items-center">
        <div class="w-3 h-3 rounded-full bg-green-400 mr-3 animate-pulse-strong"></div>
        <div class="text-lg">Status: <span id="server-status" class="text-green-400 font-bold">Online</span></div>
      </div>
      <div class="text-lg">Pemain: <span id="online-count" class="text-green-400 font-bold">0</span>/<span id="max-players" class="text-gray-400">32</span></div>
      <div class="text-sm text-gray-400">Refresh dalam: <span id="refresh-timer" class="font-bold">15</span>s</div>
    </div>
    
    <!-- Maintenance Status -->
    <div id="maintenance-status" class="mt-4 p-3 bg-yellow-400/10 rounded-lg text-center hidden animate-slideIn">
      <i class="fas fa-exclamation-triangle text-yellow-400 mr-2"></i>
      <span class="text-yellow-400">Server dalam maintenance (18.00 WIB - selesai)</span>
    </div>
  </div>

  <!-- Search Bar -->
  <div class="relative mb-6" data-aos="fade-up">
    <input type="text" id="search" placeholder="Cari player..." 
      class="w-full p-4 rounded-xl glass-effect border border-gray-700 focus:border-green-400 focus:outline-none text-white pl-12 terminal-text focus:animate-glow transition-all duration-300">
    <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
  </div>

  <!-- Player List Header -->
  <div class="grid grid-cols-12 gap-2 px-4 py-3 text-gray-400 text-sm font-semibold mb-2 glass-effect rounded-xl" data-aos="fade-in">
    <div class="col-span-1 text-center">ID</div>
    <div class="col-span-7">Nama Player</div>
    <div class="col-span-4 text-center">Ping</div>
  </div>

  <!-- Player List -->
  <div id="player-list" class="server-card p-4 rounded-xl grid grid-cols-1 gap-3 max-h-[500px] overflow-y-auto custom-scrollbar glass-effect pixel-corners mb-6"></div>

  <!-- Server Info -->
  <div id="server-info" class="p-4 glass-effect rounded-xl text-sm text-gray-400 mt-6 cyber-border" data-aos="fade-up">
    <div class="flex flex-col md:flex-row justify-between items-center">
      <div class="mb-2 md:mb-0">
        <i class="fas fa-server mr-2 text-green-400"></i>
        <span id="server-name" class="terminal-text">Mengambil info server...</span>
      </div>
      <div>
        <i class="fas fa-clock mr-2 text-green-400"></i>
        <span id="current-time" class="terminal-text">Loading waktu...</span>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="text-center text-gray-500 text-xs mt-8 pt-4 border-t border-gray-800">
    <p>MotionLife Server Monitor &copy; 2023 - Real-time Tracking System</p>
    <p class="mt-1">Status: <span class="text-green-400" id="connection-status">Connected</span> | Version: 2.1.0</p>
  </div>
</div>

<!-- Dark Mode Toggle -->
<div class="fixed bottom-4 right-4 z-20">
  <button id="dark-mode-toggle" class="p-3 rounded-full glass-effect shadow-lg hover:animate-glow transition-all duration-300 cyber-button">
    <i class="fas fa-moon text-yellow-400"></i>
  </button>
</div>

<!-- Audio Toggle -->
<div class="fixed bottom-4 left-4 z-20">
  <button id="audio-toggle" class="p-3 rounded-full glass-effect shadow-lg hover:animate-glow transition-all duration-300 cyber-button">
    <i class="fas fa-volume-up text-green-400"></i>
  </button>
</div>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<script>
// Initialize AOS
AOS.init({
  duration: 800,
  once: true,
  easing: 'ease-out-quart'
});

// Initialize particles.js
particlesJS('particles-js', {
  particles: {
    number: { value: 80, density: { enable: true, value_area: 800 } },
    color: { value: "#10B981" },
    shape: { type: "circle" },
    opacity: { value: 0.5, random: true },
    size: { value: 3, random: true },
    line_linked: {
      enable: true,
      distance: 150,
      color: "#10B981",
      opacity: 0.4,
      width: 1
    },
    move: {
      enable: true,
      speed: 2,
      direction: "none",
      random: true,
      straight: false,
      out_mode: "out",
      bounce: false
    }
  },
  interactivity: {
    detect_on: "canvas",
    events: {
      onhover: { enable: true, mode: "grab" },
      onclick: { enable: true, mode: "push" },
      resize: true
    }
  },
  retina_detect: true
});

// Matrix Rain Effect
const matrixCanvas = document.getElementById('matrixRain');
const ctx = matrixCanvas.getContext('2d');

matrixCanvas.width = window.innerWidth;
matrixCanvas.height = window.innerHeight;

const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$%&^*@#';
const fontSize = 14;
const columns = matrixCanvas.width / fontSize;
const drops = [];

for (let i = 0; i < columns; i++) {
  drops[i] = 1;
}

function drawMatrix() {
  ctx.fillStyle = 'rgba(15, 23, 42, 0.05)';
  ctx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);
  
  ctx.fillStyle = '#10B981';
  ctx.font = `${fontSize}px monospace`;
  
  for (let i = 0; i < drops.length; i++) {
    const text = characters.charAt(Math.floor(Math.random() * characters.length));
    ctx.fillText(text, i * fontSize, drops[i] * fontSize);
    
    if (drops[i] * fontSize > matrixCanvas.height && Math.random() > 0.975) {
      drops[i] = 0;
    }
    
    drops[i]++;
  }
}

let matrixInterval = setInterval(drawMatrix, 50);

// Fungsi untuk mencari server ID MotionLife
async function findMotionLifeServer() {
  try {
    // Daftar kemungkinan server ID untuk MotionLife (bisa ditambah sesuai kebutuhan)
    const possibleServerIds = ["5j433z", "motionlife", "motionliferp", "mlrp"];
    let serverData = null;
    
    for (const id of possibleServerIds) {
      try {
        const response = await fetch(`https://servers-frontend.fivem.net/api/servers/single/${id}`);
        if (response.ok) {
          const data = await response.json();
          // Cek apakah server ini adalah MotionLife (dengan memeriksa nama)
          if (data.Data && data.Data.hostname && data.Data.hostname.toLowerCase().includes("motionlife")) {
            serverData = { id: id, data: data };
            break;
          }
        }
      } catch (e) {
        console.log(`Server ID ${id} tidak valid:`, e);
      }
    }
    
    return serverData;
  } catch (error) {
    console.error("Error mencari server:", error);
    return null;
  }
}

const refreshInterval = 15; // Detik
let countdown = refreshInterval;
let currentServerId = null;

// Ambil elemen
const loadingScreen = document.getElementById("loading-screen");
const onlineCountEl = document.getElementById("online-count");
const maxPlayersEl = document.getElementById("max-players");
const refreshTimerEl = document.getElementById("refresh-timer");
const playerListEl = document.getElementById("player-list");
const serverNameEl = document.getElementById("server-name");
const serverStatusEl = document.getElementById("server-status");
const currentTimeEl = document.getElementById("current-time");
const maintenanceBanner = document.getElementById("maintenance-banner");
const maintenanceStatus = document.getElementById("maintenance-status");
const darkModeToggle = document.getElementById("dark-mode-toggle");
const audioToggle = document.getElementById("audio-toggle");
const toast = document.getElementById("toast");
const connectionStatus = document.getElementById("connection-status");

// Fungsi untuk mendapatkan kelas warna berdasarkan nilai ping
function getPingColorClass(ping) {
  if (ping < 50) return "ping-excellent";
  if (ping < 100) return "ping-good";
  if (ping < 200) return "ping-medium";
  return "ping-poor";
}

// Fungsi untuk memeriksa apakah server sedang maintenance
function checkMaintenanceStatus(onlineCount) {
  const now = new Date();
  const hours = now.getHours();
  const minutes = now.getMinutes();
  const currentTime = hours + minutes / 60;
  
  // Waktu maintenance: 18.00 WIB (11.00 UTC) sampai waktu tidak tentu
  const maintenanceStart = 11; // 18.00 WIB = 11.00 UTC
  let isMaintenanceTime = currentTime >= maintenanceStart;
  
  // Jika sudah lewat dari jam maintenance, periksa apakah online count > 1
  if (isMaintenanceTime && onlineCount > 5) {
    isMaintenanceTime = false;
  }
  
  return isMaintenanceTime;
}

// Fungsi untuk memperbarui waktu
function updateCurrentTime() {
  const now = new Date();
  const options = { 
    timeZone: 'Asia/Jakarta', 
    hour: '2-digit', 
    minute: '2-digit', 
    second: '2-digit',
    hour12: false 
  };
  const timeString = now.toLocaleTimeString('id-ID', options);
  currentTimeEl.textContent = timeString + ' WIB';
}

// Fungsi untuk menampilkan toast notifikasi
function showToast(message) {
  toast.innerHTML = `<i class="fas fa-sync-alt mr-2"></i> ${message}`;
  toast.classList.add('show');
  
  setTimeout(() => {
    toast.classList.remove('show');
  }, 3000);
}

// Fungsi untuk toggle dark mode
function toggleDarkMode() {
  document.body.classList.toggle('light-mode');
  const icon = darkModeToggle.querySelector('i');
  
  if (document.body.classList.contains('light-mode')) {
    document.body.classList.remove('gradient-bg');
    document.body.style.background = '#f8fafc';
    document.body.style.color = '#1f2937';
    icon.classList.remove('fa-moon');
    icon.classList.add('fa-sun');
    icon.classList.remove('text-yellow-400');
    icon.classList.add('text-yellow-500');
  } else {
    document.body.classList.add('gradient-bg');
    document.body.style.color = 'white';
    icon.classList.remove('fa-sun');
    icon.classList.add('fa-moon');
    icon.classList.remove('text-yellow-500');
    icon.classList.add('text-yellow-400');
  }
}

// Event listener untuk dark mode toggle
darkModeToggle.addEventListener('click', toggleDarkMode);

// Audio toggle
let audioEnabled = false;
audioToggle.addEventListener('click', function() {
  audioEnabled = !audioEnabled;
  const icon = audioToggle.querySelector('i');
  
  if (audioEnabled) {
    icon.classList.remove('fa-volume-up');
    icon.classList.add('fa-volume-mute');
    clearInterval(matrixInterval);
  } else {
    icon.classList.remove('fa-volume-mute');
    icon.classList.add('fa-volume-up');
    matrixInterval = setInterval(drawMatrix, 50);
  }
});

// Tilt effect untuk elemen kartu
function initTiltEffect() {
  const cards = document.querySelectorAll('.server-card');
  
  cards.forEach(card => {
    card.addEventListener('mousemove', function(e) {
      const cardRect = card.getBoundingClientRect();
      const x = e.clientX - cardRect.left;
      const y = e.clientY - cardRect.top;
      
      const centerX = cardRect.width / 2;
      const centerY = cardRect.height / 2;
      
      const angleY = (x - centerX) / 20;
      const angleX = (centerY - y) / 20;
      
      card.style.transform = `perspective(1000px) rotateX(${angleX}deg) rotateY(${angleY}deg) scale3d(1.02, 1.02, 1.02)`;
    });
    
    card.addEventListener('mouseleave', function() {
      card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
    });
  });
}

async function fetchData() {
  try {
    // Jika belum memiliki server ID, cari dulu
    if (!currentServerId) {
      loadingScreen.querySelector('p').textContent = "Mencari server MotionLife...";
      const serverInfo = await findMotionLifeServer();
      
      if (serverInfo) {
        currentServerId = serverInfo.id;
        // Tampilkan info server
        serverNameEl.textContent = serverInfo.data.Data.hostname;
        updateServerInfo(serverInfo.data);
        connectionStatus.textContent = "Connected";
        connectionStatus.classList.add("text-green-400");
      } else {
        throw new Error("Server MotionLife tidak ditemukan");
      }
    }
    
    const apiURL = `https://servers-frontend.fivem.net/api/servers/single/${currentServerId}`;
    const res = await fetch(apiURL);
    const data = await res.json();

    // Update data
    const players = data.Data.players;
    const onlineCount = data.Data.clients;
    onlineCountEl.textContent = onlineCount;
    
    // Update info server
    updateServerInfo(data);
    
    // Periksa status maintenance
    const isMaintenance = checkMaintenanceStatus(onlineCount);
    
    if (isMaintenance) {
      maintenanceBanner.classList.remove("hidden");
      maintenanceStatus.classList.remove("hidden");
      serverStatusEl.textContent = "Maintenance";
      serverStatusEl.classList.remove("text-green-400");
      serverStatusEl.classList.add("text-yellow-400");
    } else {
      maintenanceBanner.classList.add("hidden");
      maintenanceStatus.classList.add("hidden");
      serverStatusEl.textContent = "Online";
      serverStatusEl.classList.remove("text-yellow-400");
      serverStatusEl.classList.add("text-green-400");
    }

    // Render list pemain
    playerListEl.innerHTML = "";
    
    if (players.length === 0) {
      playerListEl.innerHTML = `
        <div class="text-center py-8 text-gray-400" data-aos="zoom-in">
          <i class="fas fa-users-slash text-4xl mb-2"></i>
          <p>Tidak ada pemain online</p>
        </div>
      `;
    } else {
      players.forEach((player, index) => {
        const ping = player.ping || 0;
        const pingColorClass = getPingColorClass(ping);
        
        const div = document.createElement("div");
        div.className = "grid grid-cols-12 gap-2 bg-gray-800/50 p-3 rounded-lg items-center glass-effect";
        div.style.animationDelay = `${index * 0.05}s`;
        div.innerHTML = `
          <div class="col-span-1 text-center text-gray-400">${player.id}</div>
          <div class="col-span-7 truncate terminal-text">${player.name}</div>
          <div class="col-span-4 text-center">
            <span class="${pingColorClass} ping-indicator"></span>
            <span class="terminal-text">${ping}ms</span>
          </div>
        `;
        playerListEl.appendChild(div);
      });
    }

    // Hilangkan loading screen setelah load pertama
    loadingScreen.style.display = "none";
    
    // Inisialisasi efek tilt setelah data dimuat
    setTimeout(initTiltEffect, 100);
    
    // Tampilkan toast notifikasi
    showToast('Data server diperbarui');

  } catch (error) {
    console.error("Gagal mengambil data:", error);
    loadingScreen.querySelector('p').textContent = "Error: " + error.message;
    connectionStatus.textContent = "Disconnected";
    connectionStatus.classList.remove("text-green-400");
    connectionStatus.classList.add("text-red-400");
    
    // Coba lagi dalam 10 detik jika server ID tidak ditemukan
    setTimeout(() => {
      currentServerId = null;
      fetchData();
    }, 10000);
  }
}

function updateServerInfo(data) {
  if (data && data.Data) {
    serverNameEl.textContent = data.Data.hostname;
    maxPlayersEl.textContent = data.Data.sv_maxclients || 32;
  }
}

function startCountdown() {
  countdown = refreshInterval;
  refreshTimerEl.textContent = countdown;
  const timer = setInterval(() => {
    countdown--;
    refreshTimerEl.textContent = countdown;
    if (countdown <= 0) {
      clearInterval(timer);
      fetchData();
      startCountdown();
    }
  }, 1000);
}

// Fitur Search
document.getElementById("search").addEventListener("input", function() {
  const filter = this.value.toLowerCase();
  const players = document.querySelectorAll("#player-list > div");
  
  players.forEach(player => {
    const playerName = player.querySelector('.truncate').textContent.toLowerCase();
    if (playerName.includes(filter)) {
      player.style.display = "grid";
      player.classList.add('animate-fadeIn');
    } else {
      player.style.display = "none";
    }
  });
});

// Smooth scroll to top ketika halaman dimuat
window.addEventListener('load', () => {
  window.scrollTo({ top: 0, behavior: 'smooth' });
});

// Resize handler untuk matrix rain
window.addEventListener('resize', function() {
  matrixCanvas.width = window.innerWidth;
  matrixCanvas.height = window.innerHeight;
});

// Inisialisasi
fetchData();
startCountdown();
setInterval(updateCurrentTime, 1000);
updateCurrentTime();
</script>

</body>
</html>
